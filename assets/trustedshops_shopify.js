(function(){var oldSnippetPresent=!0;try{var snip=document.getElementById("trustedShopsCheckout");snip?snip.remove():oldSnippetPresent=!1}catch(e){oldSnippetPresent=!1}function addCheckoutData(oldSnippetPresent2,callback){function addTsElements(cdata,reqdata){var items="",lis=reqdata.line_items;for(var idx in lis){var i=lis[idx],iStr='        <div class="tsCheckoutProductItem">            <div class="tsCheckoutProductUrl">'+i.productUrl+'</div>            <div class="tsCheckoutProductImageUrl">'+i.imageUrl+'</div>            <div class="tsCheckoutProductName">'+i.title+'</div>            <div class="tsCheckoutProductSKU">'+i.sku+'</div>            <div class="tsCheckoutProductGTIN">'+i.barcode+'</div>             <div class="tsCheckoutProductBrand">'+i.vendor+"</div>        </div>        ";items+=iStr}var div=document.createElement("div");div.innerHTML='      <!-- Trusted Shops v3.4 -->      <div id="trustedShopsCheckout" style="display:none;">        <!-- <div id="tsCheckoutOrderNr">'+cdata.order_id+'</div> -->        <div id="tsCheckoutOrderNr">'+reqdata.orderName+'</div>        <div id="tsCheckoutBuyerId">'+cdata.customer_id+'</div>        <div id="tsCheckoutBuyerEmail">'+cdata.email+'</div>        <div id="tsCheckoutOrderAmount">'+cdata.total_price+'</div>        <div id="tsCheckoutOrderPaymentType">'+reqdata.paymentGateway+'</div>        <div id="tsCheckoutOrderCurrency">'+cdata.currency+"</div>        <!-- for each product in the basket full set of data is required -->        "+items+"        <!-- product reviews end -->      </div>      <!-- Trusted Shops v3.4 - END -->      ",document.body.appendChild(div)}if(Shopify&&Shopify.Checkout&&Shopify.Checkout.OrderStatus)if(Shopify&&Shopify.checkout&&Shopify.Checkout&&(Shopify.Checkout.page=="thank_you"||Shopify.Checkout.step=="thank_you")){var c=Shopify.checkout;console.log("checkoutScript 3.4 | first load - show trustbadge ...");var url="https://trustedshops.vilango.com/orderstatus/"+Shopify.shop+"/"+c.order_id+"/"+c.created_at+"?oldSnippetPresent="+oldSnippetPresent2,xhr=new XMLHttpRequest;xhr.open("GET",url),xhr.onreadystatechange=function(){if(xhr.readyState===XMLHttpRequest.DONE)if(xhr.status===200){var data=JSON.parse(xhr.response);addTsElements(c,data),callback(null)}else throw callback(xhr.status),console.log("checkoutScript 3.4 | error happened",JSON.stringify(Shopify)),Error("Could not get order status: "+xhr.status+"|"+xhr.response)},xhr.send()}else console.log("checkoutScript 3.4 | consecutive load - don't show trustbadge");else callback()}function addProductData(){var tsId="X51031D0AF094350A1B20AEFD2C90FB66",prLocale="de_DE",loadProductReviews=function(tsId2,skus){_tsProductReviewsConfig={tsid:tsId2,locale:prLocale,sku:skus,variant:"productreviews",borderColor:"#0DBEDC",introtext:"Was unsere Kunden sagen",hideEmptySticker:"false"};var me=document.getElementById("shopify-section-product-template"),_ts=document.createElement("SCRIPT");_ts.type="text/javascript",_ts.async=!0,_ts.charset="utf-8",_ts.src="//widgets.trustedshops.com/reviews/tsSticker/tsProductSticker.js",me&&me.appendChild(_ts),_tsProductReviewsConfig.script=_ts},pathname=window.location.pathname;if(pathname.indexOf("/products/")!==-1){var request=new XMLHttpRequest,productUrl=window.location.pathname+".js";request.open("GET",productUrl,!0),console.log("productScript",productUrl),request.onload=function(){if(request.status>=200&&request.status<400){for(var data=JSON.parse(request.responseText),skus=[],arrayLength=data.variants.length,i=0;i<arrayLength;i++)skus.push(data.variants[i].sku);loadProductReviews(tsId,skus)}},request.onerror=function(error){},request.send()}}typeof addProductData=="function"&&addProductData(),addCheckoutData(oldSnippetPresent,function(error){error?console.error("Error - Not adding a tsScript",error):function(){var _tsid="X51031D0AF094350A1B20AEFD2C90FB66";_tsConfig={yOffset:"54",variant:"reviews",customElementId:"",trustcardDirection:"topRight",customBadgeWidth:"",customBadgeHeight:"",disableResponsive:"false",disableTrustbadge:"false"};var _ts=document.createElement("script");_ts.type="text/javascript",_ts.charset="utf-8",_ts.async=!0,_ts.src="//widgets.trustedshops.com/js/"+_tsid+".js";var __ts=document.getElementsByTagName("script")[0];__ts.parentNode.insertBefore(_ts,__ts)}()});var style=document.createElement("style");style.innerHTML="#trustedshops-productreviews-sticker-wrapper {margin: 20px 20px 0 20px;}";var ref=document.querySelector("script");ref.parentNode.insertBefore(style,ref)})();
//# sourceMappingURL=/s/files/1/0821/7481/t/58/assets/trustedshops_shopify.js.map?v=1686997530
